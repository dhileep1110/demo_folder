1.  Service- validation class:
	
	  if(ibData.equalsIgnoreCase("IB") && recStusToInsert == 0) {
			            	String token = UUID.randomUUID().toString().replace("-", "");
			            	//insert consent record
			            	emailServiceDAO.insertConsentRecord(bulkAppNmbr,token);
			            	//Send Consent Mail
			            	sendConsentMail(custEmail,mercCode,mercName,token,sessionBean);
			            }
						
						
 2. emailServiceDAO class:
 
	public void insertConsentRecord(Integer applNo,String token)throws Exception{
		try {
		StringBuffer insertqry = new StringBuffer();
		insertqry.append("INSERT INTO MPS_EMAIL_AUDT_LOG ");
		insertqry.append("(MAM_UNQE_REFNO, MAM_APPL_NO, MAM_REQ_TIMESTMP, MAM_MAIL_STUS, MAM_CSNT_STUS, MAM_LUPD_SYDT) ");
		insertqry.append("VALUES (?, ?, sysdate, 1, ?, sysdate)");
        
        JdbcTemplate.update(insertqry.toString(),token,applNo, "PENDING");
		}catch(Exception e) {
			logger.error("Error while inserting Consent record details "+e.getMessage());
		}	
	}
	
  3. sendConsentMail:
  
  public void sendConsentMail(String mercEmail, String mercCode,String mercName, String token, SessionBean sessionBean) {
		try
		{	
			String baseurl = ServletActionContext.getRequest().getRequestURL().substring(0,
					(ServletActionContext.getRequest().getRequestURL()).lastIndexOf("/"));
			String instShortName = ServletActionContext.getRequest().getRequestURI().replaceAll
					(ServletActionContext.getRequest().getContextPath().trim(), "").replaceAll("/", "").substring(0, 3);
			EmailBean emailBean = new EmailBean();
			emailBean.setPriority("1");
			emailBean.setTo(mercEmail);
			emailBean.setSubject("Consent Required â€“ Merchant Onboarding Request");
			emailBean.setVelocityTemplateName("consentAggrementEmail.html");
			
			Map<String, Object> bodyMap = new HashMap<String, Object>();
			bodyMap.put("mer_name", mercName);	
			bodyMap.put("instName", sessionBean.getInstName());
			bodyMap.put("Consent_Link", baseurl + "/" + instShortName + "consentProcess.action?" +token+"&mercCode="+mercCode);
			emailBean.setBodyVariables(bodyMap);
			emailService.sendEmail(emailBean);
		}catch (Exception e) {
			loggerUtil.error("Error while sending merchant Confirmation mail to maker", e);
		}
	}